# 3.3 Turning Commands into a Script

## သင်ခန်းစာ အညွှန်း (Reference to LPI objectives)
* **Linux Essentials version 1.6, Exam 010, Objective 3.3**
* **အလေးချိန် (Weight):** 4

### အဓိက သိရှိရမည့် နယ်ပယ်များ (Key knowledge areas)
* Shell Script တစ်ခု၏ အခြေခံ တည်ဆောက်ပုံ
* Shebang (`#!`) အသုံးပြုပုံ
* Script ကို run နိုင်ရန် ခွင့်ပြုချက် (Permissions) သတ်မှတ်ခြင်း
* Script အတွင်း Variables များနှင့် Loops များကို အသုံးပြုခြင်း
* `sort`, `uniq`, `wc` တို့ဖြင့် data များကို စီမံခြင်း

---

### နိဒါန်း (Introduction)
Shell Script ဆိုသည်မှာ command အမြောက်အမြားကို ဖိုင်တစ်ခုတည်းတွင် စုစည်းရေးသားထားခြင်း ဖြစ်သည်။ ၎င်းကို အသုံးပြုခြင်းဖြင့် ထပ်တလဲလဲ လုပ်ဆောင်ရသော အလုပ်များကို automatic (အလိုအလျောက်) လုပ်ဆောင်စေနိုင်ပြီး အချိန်ကုန်သက်သာစေပါသည်။ Linux တွင် script ရေးသားရန် အသုံးအများဆုံး shell မှာ **Bash** ဖြစ်သည်။

---

### Basic Script Structure (အခြေခံ တည်ဆောက်ပုံ)

#### 1. Shebang (`#!`)
Script ဖိုင်တစ်ခု၏ ပထမဆုံး စာကြောင်းတွင် Shebang ကို အမြဲထည့်ရမည်။ ၎င်းသည် ဤ script ကို မည်သည့် program (interpreter) ဖြင့် run ရမည်ကို system သို့ ပြောပြခြင်းဖြစ်သည်။
* **Bash အတွက်:** `#!/bin/bash`

#### 2. Comments (မှတ်ချက်များ)
`#` သင်္ကေတကို သုံး၍ script အတွင်း မှတ်ချက်များ ရေးနိုင်သည်။ ၎င်းတို့ကို system က ဖတ်မည်မဟုတ်ဘဲ လူများ နားလည်စေရန်သာ ဖြစ်သည်။
* **ဥပမာ:** `# This is a backup script`

---

### Making a Script Executable (Script ကို run ခွင့်ပြုခြင်း)
Script ဖိုင်တစ်ခုကို ရေးသားပြီးရုံနှင့် တိုက်ရိုက် run လို့မရပါ။ ၎င်းကို "executable" ဖြစ်အောင် permissions ပြောင်းပေးရမည်။
* **Command:** `chmod +x myscript.sh`
* **Run ပုံ:** `./myscript.sh`

---

### Processing Data (ဒေတာများကို စီမံခန့်ခွဲခြင်း)
Script များအတွင်း အချက်အလက်များကို အသုံးဝင်သော သတင်းအချက်အလက် (Information) အဖြစ် ပြောင်းလဲရန် အောက်ပါ command များကို သုံးသည်-

* **`sort`:** စာသားများကို အက္ခရာစဉ်အလိုက် သို့မဟုတ် ဂဏန်းစဉ်အလိုက် စီပေးသည်။
    * `-n`: ဂဏန်းအလိုက် စီရန်။
    * `-r`: ပြောင်းပြန် (Z to A) စီရန်။
* **`uniq`:** ထပ်နေသော စာကြောင်းများကို ဖယ်ထုတ်ပေးသည်။ (`sort` နှင့် တွဲသုံးလေ့ရှိသည်)
    * `-c`: စာကြောင်း တစ်ကြောင်းစီ ဘယ်နှစ်ကြိမ်ပါသလဲ ဆိုသည်ကို ရေတွက်ပြသည်။
* **`wc` (Word Count):** စာလုံးအရေအတွက်၊ စာကြောင်းအရေအတွက်ကို ရေတွက်သည်။
    * `-l`: စာကြောင်း အရေအတွက် (Lines) ကိုသာ ရေတွက်ရန်။

---

### Variables in Scripts (ကိန်းရှင်များ)
Variable များကို အချက်အလက် သိမ်းဆည်းရန် သုံးသည်။
```bash
#!/bin/bash
NAME="Linux User"
echo "Hello $NAME"
```

---

### Exit Codes (ထွက်ခွာမှု ကုဒ်များ)

#### အဓိပ္ပာယ်ဖွင့်ဆိုချက် (Definition)
Linux system တွင် command တစ်ခု သို့မဟုတ် program တစ်ခု အလုပ်လုပ်ပြီးတိုင်း ၎င်း၏ လုပ်ဆောင်ချက် အောင်မြင်မှု ရှိ၊ မရှိကို ဖော်ပြရန် integer (ကိန်းပြည့်) တန်ဖိုးတစ်ခုကို ပြန်ပေးလေ့ရှိသည်။ ၎င်းကို **Exit Code** သို့မဟုတ် **Return Code** ဟု ခေါ်ဆိုသည်။

#### အဓိက အချက်များ (Key Points)
* **0 (Zero):** Command အလုပ်လုပ်တာ အောင်မြင်တယ် (Success) လို့ အဓိပ္ပာယ်ရသည်။
* **0 မဟုတ်သော တန်ဖိုးများ (1-255):** Command အလုပ်လုပ်ရာတွင် အမှားတစ်ခုခု (Error) ရှိခဲ့သည်ဟု အဓိပ္ပာယ်ရသည်။
* **$? Variable:** နောက်ဆုံးအလုပ်လုပ်ခဲ့သော command ၏ exit code ကို သိလိုပါက `$?` ဆိုသော အထူး variable ကို သုံးပြီး စစ်ဆေးနိုင်သည်။

#### ဥပမာ (Example)
အောက်ပါအတိုင်း script ထဲတွင် exit code ကို အသုံးပြုနိုင်သည်။

```bash
ls /etc/passwd
echo $?
```

အထက်ပါ command တွင် /etc/passwd ဖိုင်ရှိပါက exit code 0 ထွက်လာမည်ဖြစ်ပြီး၊ မရှိပါက 0 မဟုတ်သော အခြားကိန်းဂဏန်းတစ်ခု ထွက်လာမည်ဖြစ်သည်။

#### ဘာကြောင့် အရေးကြီးသလဲ?
Script များ ရေးသားရာတွင် ရှေ့က command အောင်မြင်မှသာ နောက်ထပ်အလုပ်တစ်ခုကို ဆက်လုပ်စေချင်သည့်အခါ (Conditional Logic) တွင် Exit Codes များကို အဓိကထား အသုံးပြုကြသည်။

---

### Loops and Conditionals (အခြေခံ ထိန်းချုပ်မှုများ)

#### For Loop
- အရာဝတ္ထု အမြောက်အမြားကို တစ်ခုချင်းစီ အလှည့်ကျ အလုပ်လုပ်စေလိုသောအခါ သုံးသည်။

```bash
for file in *.txt
do
    echo "Processing $file"
done
```

#### If Statement
- အခြေအနေတစ်ခု ဟုတ်/မဟုတ် ပေါ်မူတည်၍ ဆုံးဖြတ်ချက်ချရန် သုံးသည်။

```bash
if [ "$USER" == "root" ]
then
    echo "You are admin."
else
    echo "You are normal user."
fi
```

Conditional Executions (&& နှင့် ||)
- && (AND): ရှေ့က command အောင်မြင်မှ နောက်က command ကို run မည်။ 
  - `mkdir backup && cp file.txt backup/`
- \|\| (OR): ရှေ့က command ကျရှုံးမှ နောက်က command ကို run မည်။
  - `ls data || echo "File not found"`

---

### အကျဉ်းချုပ် (Summary)
ယခု သင်ခန်းစာတွင် သင်ယူခဲ့ရသည်များမှာ-
- Shebang (#!/bin/bash) ၏ အရေးပါပုံ။
- Script ဖိုင်များကို chmod +x ဖြင့် run နိုင်အောင် ပြုလုပ်ပုံ။
- sort, uniq, wc တို့ကို သုံး၍ data များကို စုစည်းပုံ။
- Variables, Exit Code, Loops နှင့် If statements တို့၏ အခြေခံ အသုံးပြုပုံ။
- && နှင့် \|\| တို့ဖြင့် command များကို အခြေအနေအလိုက် ချိတ်ဆက်ပုံ။