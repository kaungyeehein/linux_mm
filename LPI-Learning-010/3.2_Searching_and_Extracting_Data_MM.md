# 3.2 Searching and Extracting Data from Files

## သင်ခန်းစာ အညွှန်း (Reference to LPI objectives)
* **Linux Essentials version 1.6, Exam 010, Objective 3.2**
* **အလေးချိန် (Weight):** 3

### အဓိက သိရှိရမည့် နယ်ပယ်များ (Key knowledge areas)
* Pipe (`|`) နှင့် I/O Redirection (`>`, `>>`) ကို အသုံးပြုခြင်း
* `grep` ကို အသုံးပြု၍ စာသားများ ရှာဖွေခြင်း
* Regular Expressions အခြေခံများ
* `less`, `cat`, `head`, `tail` စသည့် file output command များ

---

### နိဒါန်း (Introduction)
Linux တွင် file များအတွင်းရှိ အချက်အလက်များကို ရှာဖွေခြင်း၊ စစ်ထုတ်ခြင်း (filtering) နှင့် လိုအပ်သလို ပြောင်းလဲပြင်ဆင်ခြင်းတို့သည် အလွန်အရေးကြီးသော ကျွမ်းကျင်မှုများ ဖြစ်သည်။ ဤသင်ခန်းစာတွင် command တစ်ခု၏ output ကို အခြားနေရာသို့ ပို့ဆောင်ပုံနှင့် file များအတွင်းမှ စာသားများကို ကျွမ်းကျင်စွာ ရှာဖွေပုံကို လေ့လာပါမည်။

---

### Command Output လမ်းကြောင်းပြောင်းခြင်း (I/O Redirection)
Command တစ်ခုကို run လိုက်လျှင် ထွက်ပေါ်လာသော ရလဒ် (output) ကို screen ပေါ်တွင် မပြဘဲ file တစ်ခုအတွင်းသို့ သိမ်းဆည်းလိုသောအခါ Redirection ကို သုံးသည်။

1.  **Overwrite (`>`):** File အသစ်တစ်ခု တည်ဆောက်ပြီး output ကို ထည့်သည်။ File ရှိပြီးသားဆိုလျှင် အဟောင်းကို ဖျက်ပြီး အသစ်ဖြင့် အစားထိုးသည်။
    * **ဥပမာ:** `ls > files.txt`
2.  **Append (`>>`):** File အဟောင်းရှိ အချက်အလက်များကို မဖျက်ဘဲ အောက်ဆုံးမှ ထပ်တိုးထည့်သည်။
    * **ဥပမာ:** `date >> files.txt`

#### Redirecting Standard Error (2>)
Linux တွင် command တစ်ခု run သောအခါ ပုံမှန်ရလဒ် (Standard Output - `stdout`) နှင့် အမှားသတင်းစကား (Standard Error - `stderr`) ဟူ၍ နှစ်မျိုးရှိသည်။ ၎င်းတို့ကို သီးခြားစီ လမ်းကြောင်းပြောင်းနိုင်သည်။

* **Standard Output (`1>` သို့မဟုတ် `>`):** ပုံမှန်ရလဒ်ကိုသာ သိမ်းသည်။
* **Standard Error (`2>`):** တက်လာသော Error များကိုသာ သီးခြား file တစ်ခုထဲသို့ ပို့သည်။

**ဥပမာများ:**
* `ls /root 2> error.log`
  (Permission မရှိသောကြောင့် တက်လာမည့် error များကို error.log ထဲသို့ သိမ်းမည်)
* **Output နှင့် Error နှစ်ခုလုံးကို သိမ်းလိုလျှင် (`&>`):**
  `ls /home /root &> all_output.txt`
* **Error များကို လုံးဝမမြင်ချင်လျှင် (`2> /dev/null`):**
  `find / -name "test" 2> /dev/null`
  (/dev/null သည် အချက်အလက်များကို အပြီးတိုင် ဖျက်ဆီးပစ်သည့် "black hole" ကဲ့သို့ ဖြစ်သည်)

#### Redirecting Standard Input (<)
သာမန်အားဖြင့် command တစ်ခုသည် input ကို keyboard မှ ရယူသည်။ သို့သော် ဖိုင်တစ်ခုအတွင်းရှိ စာသားများကို input အဖြစ် အသုံးပြုလိုပါက `<` သင်္ကေတကို သုံးသည်။

* **အသုံးပြုပုံ:** `command < input_file`
* **ဥပမာ:** `tr 'a-z' 'A-Z' < file.txt`
  (file.txt ထဲရှိ စာသားများကို ဖတ်ယူပြီး စာလုံးအကြီးများအဖြစ် ပြောင်းလဲပေးမည်)

#### Here Documents (<<)
Shell script များ ရေးသားရာတွင် command တစ်ခုထဲသို့ စာကြောင်း အမြောက်အမြားကို input အဖြစ် တိုက်ရိုက်ထည့်သွင်းလိုသောအခါ `<<` ကို သုံးသည်။ ၎င်းကို "Here Document" ဟု ခေါ်သည်။

**ဥပမာ:**
```bash
cat << EOF
ဤစာသားများသည် 
EOF ဟု မရိုက်မချင်း
Input အဖြစ် ဝင်နေမည် ဖြစ်သည်။
```

---

### Pipes (`|`)
Pipe သည် command တစ်ခု၏ output ကို နောက်ထပ် command တစ်ခု၏ input အဖြစ် တိုက်ရိုက် ပေးပို့ရန် သုံးသည်။ ၎င်းသည် command အမြောက်အမြားကို ကွင်းဆက် (chain) တစ်ခုကဲ့သို့ တွဲသုံးနိုင်စေသည်။
* **ဥပမာ:** `ls /etc | less`
(ETC ထဲရှိ ဖိုင်စာရင်းကို `less` command ထဲသို့ ပို့လိုက်သဖြင့် screen တစ်ခုချင်းစီ အေးဆေးဖတ်နိုင်မည် ဖြစ်သည်)

[Image showing the concept of a Linux pipe connecting two commands]

---

### Searching with `grep` (စာသားရှာဖွေခြင်း)
`grep` (Global Regular Expression Print) သည် file များအတွင်းရှိ သတ်မှတ်ထားသော စာသား (pattern) ကို ရှာဖွေပေးသည့် အစွမ်းထက်ဆုံး tool ဖြစ်သည်။

* **အခြေခံသုံးစွဲပုံ:** `grep "pattern" filename`
* **Common Options:**
    * `-i`: စာလုံးအကြီးအသေး (case) မရွေးဘဲ ရှာရန်။
    * `-v`: ရှာနေသည့် စာသား "မပါသော" စာကြောင်းများကို ပြရန် (Invert match)။
    * `-n`: ရှာတွေ့သည့် စာကြောင်း နံပါတ်ကိုပါ ပြရန်။
    * `-c`: ရှာတွေ့သည့် စာကြောင်း အရေအတွက်ကိုသာ ပြရန်။
    * `-r`: Directory တစ်ခုလုံးရှိ file အားလုံးထဲတွင် ရှာရန် (Recursive)။

**ဥပမာ:** `grep -i "error" /var/log/syslog`

---

### Regular Expressions (Basic)
Grep နှင့် အခြား tool များတွင် စာသားများကို ပိုမိုတိကျစွာ ရှာဖွေရန် "သင်္ကေတများ" ကို သုံးနိုင်သည်။
* **`^` (Caret):** စာကြောင်း၏ "အစ" နေရာကို ဆိုလိုသည်။
    * `grep "^root" /etc/passwd` (root နှင့် စတင်သော စာကြောင်းများကို ရှာမည်)
* **`$` (Dollar):** စာကြောင်း၏ "အဆုံး" နေရာကို ဆိုလိုသည်။
    * `grep "bash$" /etc/passwd` (bash နှင့် ဆုံးသော စာကြောင်းများကို ရှာမည်)
* **`.` (Dot):** မည်သည့် စာလုံး တစ်လုံးကိုမဆို ကိုယ်စားပြုသည်။

---

### Viewing and Extracting Data
File တစ်ခုလုံးကို မဖတ်ဘဲ လိုအပ်သော အစိတ်အပိုင်းကိုသာ ထုတ်ကြည့်ရန် အောက်ပါတို့ကို သုံးသည်-

1.  **`cat`:** File တစ်ခုလုံးကို screen ပေါ်တွင် တစ်ပြိုင်တည်း ပြသည်။
2.  **`head`:** File ၏ အပေါ်ဆုံး စာကြောင်းအချို့ကို ပြသည်။ (Default သည် ၁၀ ကြောင်း ဖြစ်သည်)
    * `head -n 5 file.txt` (အပေါ်ဆုံး ၅ ကြောင်း ပြမည်)
3.  **`tail`:** File ၏ အောက်ဆုံး စာကြောင်းအချို့ကို ပြသည်။
    * `tail -f file.log` (File ထဲသို့ စာသားအသစ်များ တိုးလာတိုင်း တိုက်ရိုက်ပြပေးနေမည် - Log ဖတ်ရန် အလွန်ကောင်းသည်)
4.  **`less`:** File ကို အပေါ်အောက် ဆွဲဖတ်နိုင်အောင် ပြပေးသည်။ (စာမျက်နှာ ရှည်သော file များအတွက် သုံးသည်)

---

### အကျဉ်းချုပ် (Summary)
ယခု သင်ခန်းစာတွင် သင်ယူခဲ့ရသည်များမှာ-
* `>` နှင့် `>>` ကို သုံး၍ command output များကို file ထဲသို့ သိမ်းဆည်းပုံ။
* Pipe (`|`) ကို သုံး၍ command များကို ပေါင်းစပ်အသုံးပြုပုံ။
* `grep` ဖြင့် file များအတွင်းမှ လိုအပ်သော စာသားများကို ရှာဖွေစစ်ထုတ်ပုံ။
* `head`, `tail`, `cat` နှင့် `less` တို့၏ ကွာခြားချက်နှင့် အသုံးပြုပုံ။
